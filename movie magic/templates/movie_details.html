<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Movie Details - Movie Magic</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

</head>
<body class="bg-gray-100">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-xl font-bold text-gray-900">üé¨ Movie Magic</h1>
      <a href="{{ url_for('movies') }}" class="text-purple-600 hover:underline">‚Üê Back to Movies</a>
    </div>
  </header>

  <!-- Movie Details Section -->
  <div class="max-w-4xl mx-auto p-6 bg-white mt-6 rounded-lg shadow">
    <img id="movieImage" class="w-full h-96 object-cover rounded mb-4" />
    <h2 id="movieTitle" class="text-3xl font-bold text-gray-800 mb-2"></h2>
    <p id="movieGenre" class="text-gray-600 mb-2"></p>
    <p id="movieDesc" class="text-gray-700 mb-4"></p>
    <p id="moviePrice" class="text-xl font-semibold text-purple-600"></p>

    <!-- Cast Section -->
    <h3 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Cast</h3>
    <ul id="movieCast" class="text-gray-700 space-y-1 list-disc list-inside"></ul>
  </div>

  <!-- Showtime Selection Section -->
  <div class="max-w-4xl mx-auto p-6 bg-white mt-6 rounded-lg shadow">
    <h3 class="text-2xl font-bold text-gray-800 mb-4">Select Showtime</h3>
    <div id="showtimes" class="space-y-4"></div>
    <a href="#" id="selectSeatsBtn"
       class="w-full block bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold text-center mt-6">
      Select Seats
    </a>
  </div>
  <script>
  const seatSelectionUrl = "{{ url_for('seat_selection') }}";  // Flask will render this server-side
</script>
<script>
  window.onload = function () {
    const urlParams = new URLSearchParams(window.location.search);
    const movieId = urlParams.get('id');

    const movies = {
      "1": {
        title: "Kingdom",
        genre: "Drama,Action",
        price: "Rs180",
        image: "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRfHoiBliijeRVAi4GY_TryAITeBeTRxlayps0eJUaPY74b732T",
        description: "The film revolves around a terrorist attack on an American housing compound in Riyadh, Saudi Arabia. FBI Special Agent Ronald Fleury leads a team to investigate the attack, facing resistance from Saudi officials and navigating a complex political landscape.",
        cast: [
          { name: "vijay devarkonda", role: "suri" },
          { name: "satyadev", role: "siva" },
          { name: "Bhagyasri", role: "lilly" },
          { name: "ayyappa", role: "murugan" }
        ],
        showtimes: [
          { time: "2:00 PM", price: "Rs200", seats: 50 },
          { time: "5:30 PM", price: "Rs200", seats: 50 },
          { time: "9:00 PM", price: "Rs200", seats: 50 }
        ]
      },
      "2": {
        title: "coolie",
        genre: "Action, Adventure,Drama",
        price: "Rs250",
        image: "https://www.wallsnapy.com/img_gallery/coolie-movie-rajini--poster-4k-download-9445507.jpg",
        description: "The plot is said to involve a vendetta, driven by the protagonist's desire to right past wrongs from his youth. The film is also reported to have an emotional core, with Deva's quest for revenge shaping his life and purpose.",
        cast: [
          { name: "John‚ÄØKrasinski", role: "Reed Richards" },
          { name: "Emily‚ÄØBlunt", role: "Sue Storm" },
          { name: "Dacre‚ÄØMontgomery", role: "Johnny Storm" }
        ],
        showtimes: [
          { time: "1:00 PM", price: "Rs200", seats: 50 },
          { time: "4:00 PM", price: "Rs200", seats: 50 },
          { time: "8:00 PM", price: "Rs200", seats: 50 }
        ]
      },
      "3": {
        title: "rajasaab",
        genre: "Horror,fantasy",
        price: "Rs250",
        image: "https://assets-in.bmscdn.com/discovery-catalog/events/et00383697-gucgrdkcjr-landscape.jpg",
        description: "A young heir embraces both his royal heritage and rebellious spirit as he rises to power, establishing unprecedented rules during his reign as Raja Saab.",
        cast: [
          { name: "prabas", role: "munna" },
          { name: "nidhi agarwal", role: "agarwal" },
          { name: "sanjay dutt", role: "sanju" }
        ],
        showtimes: [
          { time: "10:00 AM", price: "Rs250", seats: 50 },
          { time: "1:30 PM", price: "Rs250", seats: 50 },
          { time: "6:00 PM", price: "Rs250", seats: 50 }
        ]
      },
      
      "4": {
        title: "War 2",
        genre: "Action, Thriller",
        price: "Rs200",
        image: "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRcUHzhXmYstYQAUNnsxv-utGFQ0_hpBZJgCgD30p0jqtERSH1y",
        description: "A rogue mission forces elite agents from rival nations to unite against a deadly global threat. As hidden loyalties unravel, every move could spark international war. Packed with high-octane action and mind games, War 2 raises the stakes like never before.",
        cast: [
          { name: "Hrithik Roshan", role: "Vikram ‚ÄúVik‚Äù Sinha" },
          { name: "John Abraham", role: " Arjun Varma" },
          { name: "Deepika Padukone", role: "Dr. Meera Rao" }
        ],
        showtimes: [
          { time: "11:00 AM", price: "Rs200", seats: 50 },
          { time: "2:30 PM", price: "Rs200", seats: 50 },
          { time: "6:30 PM", price: "Rs200", seats: 50 }
        ]
      },
      "5": {
        title: "Devara part-1",
        genre: "Action, Thriller,Drama",
        price: "Rs200",
        image: "https://static.toiimg.com/thumb/resizemode-4,width-1280,height-720,msid-113587323/113587323.jpg",
        description: "The film centers around a conflict between Devara and Bhaira, fueled by Devara's decision to stop smuggling operations, which disrupts the established order. ",
        cast: [
          { name: "NTR", role: "Devara" },
          { name: "Saif Ali Khan", role: "Bhaira" },
          { name: "Janhvi Kapoor", role: "thangam" }
        ],
        showtimes: [
          { time: "10:30 AM", price: "Rs250", seats: 50 },
          { time: "3:30 PM", price: "Rs250", seats: 50 },
          { time: "8:30 PM", price: "Rs250", seats: 50 }
        ]
      },
      "6": {
        title: "Nikita Roy",
        genre: "Horror, Mystery, Thriller",
        price: "Rs250",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYs_PKQZnJRaDUREOPF0fCcFf-gkwQNTNE0QsthsbNjFSE_MIm",
        description: "Nikita Roy, a fearless investigator, uncovers a dark conspiracy linked to a series of mysterious disappearances. As she delves deeper, the line between truth and illusion begins to blur. A gripping psychological thriller where justice comes at a chilling cost.",
        cast: [
          { name: "Taapsee Pannu", role: "Nikita Roy" },
          { name: "Vicky Kaushal", role: "Rahil Mehra" },
          { name: "Radhika Apte", role: "Leena Malik" }
        ],
        showtimes: [
          { time: "11:30 AM", price: "Rs250", seats: 50 },
          { time: "4:30 PM", price: "Rs250", seats: 50 },
          { time: "9:30 PM", price: "Rs250", seats: 50 }
        ]
      },
      "7": {
        title: "3 BHK",
        genre: "Drama, Family",
        price: "Rs200",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ9zdJ5ZhXj8pRpDBx4ywHu8tCLs6LQmAPRllzYEfgUfgDXUvUu",
        description: "A middle-class family's dream home turns into a maze of secrets as strange events unfold behind each door. Hidden tensions and mysterious neighbors begin to unravel their peaceful life. 3 BHK is a suspense-filled domestic drama where every room holds a twist.",
        cast: [
          { name: "Siddharth", role: "Prabhu (Vasudevan‚Äôs son)" },
          { name: "R. Sarathkumar", role: "Vasudevan" },
          { name: "Meetha Raghunath", role: "Aarthy (Prabhu‚Äôs younger sister)" }
        ],
        showtimes: [
          { time: "12:15 PM", price: "Rs200", seats: 50 },
          { time: "3:15 PM", price: "Rs200", seats: 50 },
          { time: "6:15 PM", price: "Rs200", seats: 50 }
        ]
      },
      
      "8": {
        title: "Hari Hara Veera Mallu",
        genre: "Action, Drama",
        price: "Rs250",
        image: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR2t2qnSxIi9X8qIcUJ8X3ZbNak1nOr5SlyQ-_u-tjMrYgeUk-l",
        description: "Set in the Mughal era, Veera Mallu, a legendary outlaw, rises against tyranny to steal the prized Koh-i-Noor diamond. Battling empires and destiny, he becomes a symbol of rebellion and justice. Hari Hara Veera Mallu is a grand historical epic blending action, devotion, and heroism.",
        cast: [
          { name: "Pawan Kalyan", role: "Veera Mallu" },
          { name: "Nidhhi Agerwal", role: "Heroine" },
          { name: "Arjun Rampal", role: "Villain" }
        ],
        showtimes: [
          { time: "2:30 PM", price: "Rs200", seats: 50 },
          { time: "5:30 PM", price: "Rs200", seats: 50 },
          { time: "8:30 PM", price: "Rs200", seats: 50 }
        ]
      },
      "9": {
        title: "Kannapa",
        genre: "Action, Epic",
        price: "Rs300",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQZFvUvhzgYPzw8sTQReM0ruAAEIEjHkGhMHnO3ytAZGWxsk-p",
        description: "Based on the legendary devotee of Lord Shiva, Kannapa follows a tribal hunter whose unwavering faith leads to divine transformation. As he challenges societal norms and spiritual tests, his devotion transcends boundaries. A powerful mythological epic celebrating sacrifice, belief, and eternal love for the divine.",
        cast: [
          { name: "Vishnu‚ÄØManchu", role: "Kannapa" },
          { name: "Prabhas", role: "Rudra" },
          { name: "Akshay‚ÄØKumar", role: "Lord Shiva" }
        ],
        showtimes: [
          { time: "3:00 PM", price: "Rs200", seats: 50 },
          { time: "6:00 PM", price: "Rs200", seats: 50 },
          { time: "9:00 PM", price: "Rs200", seats: 50 }
        ]
      }
    };

       const movie = movies[movieId];
    let selectedShowtime = null;

    if (movie) {
      document.getElementById("movieTitle").textContent = movie.title;
      document.getElementById("movieGenre").textContent = movie.genre;
      document.getElementById("movieDesc").textContent = movie.description;
      document.getElementById("moviePrice").textContent = movie.price;
      document.getElementById("movieImage").src = movie.image;

      const castContainer = document.getElementById("movieCast");
      movie.cast.forEach(actor => {
        const li = document.createElement("li");
        li.textContent = `${actor.name} as ${actor.role}`;
        castContainer.appendChild(li);
      });
      const showtimesContainer = document.getElementById("showtimes");
      movie.showtimes.forEach((show) => {
        const card = document.createElement("div");
        card.className = "border border-gray-200 rounded-lg p-4 cursor-pointer transition-all";
        card.innerHTML = `
          <div class="flex justify-between items-center mb-2">
            <span class="text-2xl font-bold text-purple-600">${show.time}</span>
            <span class="text-lg font-bold">${show.price}</span>
          </div>
          <div class="flex items-center text-sm text-gray-600">
            <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
            <span>${show.seats} seats available</span>
          </div>
        `;
        card.addEventListener("click", () => {
          selectedShowtime = show.time;
          document.querySelectorAll("#showtimes > div").forEach(div =>
            div.classList.remove("border-purple-500", "bg-purple-100")
          );
          card.classList.add("border-purple-500", "bg-purple-100");
        });
        showtimesContainer.appendChild(card);
      });
      document.getElementById("selectSeatsBtn").addEventListener("click", (e) => {
        e.preventDefault();
        if (!selectedShowtime) {
          alert("Please select a showtime first.");
          return;
        }
        const redirectUrl = `${seatSelectionUrl}?movie=${encodeURIComponent(movie.title)}&time=${encodeURIComponent(selectedShowtime)}&price=${encodeURIComponent(movie.price)}`;
        window.location.href = redirectUrl;
      });
    } else {
      document.body.innerHTML = "<div class='text-center text-red-600 text-xl mt-10'>Movie not found</div>";
    }
  };
</script>
</body>
</html>
